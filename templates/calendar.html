<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src='https://code.jquery.com/jquery-3.5.1.slim.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js'></script>
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@6.1.13/index.global.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/@fullcalendar/rrule@6.1.13/index.global.min.js'></script>
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      .calendar-container {
        display: flex;
        justify-content: right;
      }
      .calendar {
        width: 1000px; /* Increase width */
        height: 800px; /* Increase height */
      }
      #calendar {
        width: 100%; /* Adjust the width as needed */
        position: absolute;
        padding-top: 10px;
      }
    </style>
</head>
<body>
    <div class="modal fade" id="eventModal" tabindex="-1" role="dialog" aria-labelledby="eventModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="eventModalLabel">Add Event</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form id="eventForm">
                <div class="form-group">
                  <label for="eventTitle">Event Title</label>
                  <input type="text" class="form-control" id="eventTitle" required>
                </div>
                <div class="form-group">
                  <label for="eventStart">Start Date</label>
                  <input type="text" class="form-control datetimepicker" id="eventStart" required>
                </div>
                <div class="form-group">
                  <label for="eventEnd">End Date</label>
                  <input type="text" class="form-control datetimepicker" id="eventEnd">
                </div>
                <div class="form-group form-check">
                  <input type="checkbox" class="form-check-input" id="eventAllDay">
                  <label class="form-check-label" for="eventAllDay">All Day</label>
                </div>
                <div class="form-group">
                  <label for="eventRepeat">Repeat</label>
                  <select class="form-control" id="eventRepeat">
                    <option value="">No Repeat</option>
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                    <option value="monthly">Monthly</option>
                    <option value="yearly">Yearly</option>
                  </select>
                </div>
                <button type="submit" class="btn btn-primary">Save Event</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    <div class="calendar-container">
        <div id='calendar' class="calendar"></div>
    </div>

    <script>
        $(document).ready(function() {
            $('.datetimepicker').datepicker({
                format: 'yyyy-mm-dd',
                autoclose: true,
                todayHighlight: true
            });
        });

        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var currentView = 'dayGridMonth';
            var selectedStart;
            var selectedEnd;

            var malaysiaHolidays = [
                {
                    title: 'New Year\'s Day',
                    start: '2024-01-01',
                    allDay: true,
                    color: '#ff0000' // Red color for public holidays
                },
                {
                    title: 'Chinese New Year',
                    start: '2024-01-25',
                    allDay: true,
                    color: '#ff0000' // Red color for public holidays
                }
                // Add other public holidays with appropriate colors
            ];

            var dummyEvents = [
                {
                    title: 'Mini IT TT4L',
                    start: '2024-05-25T10:00:00',
                    end: '2024-05-25T11:00:00',
                    allDay: false,
                    color: '#3788d8' // Blue color for dummy events
                },
                {
                    title: 'Project Deadline',
                    start: '2024-05-28',
                    allDay: true,
                    color: '#3788d8' // Blue color for dummy events
                }
                // Add other dummy events with the same color or different colors as needed
            ];

            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: currentView,
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay,resourceTimelineWeek'
                },
                selectable: true,
                selectHelper: true,
                businessHours: {
                    // Business hours from Monday to Friday, 9am to 6pm
                    daysOfWeek: [1, 2, 3, 4, 5], // Monday to Friday
                    startTime: '09:00', // 9am
                    endTime: '18:00' // 6pm
                },
                events: dummyEvents.concat(malaysiaHolidays), // Concatenate Malaysia holidays with dummyEvents
                select: function(info) {
                    selectedStart = info.startStr;
                    selectedEnd = info.endStr;
                    document.getElementById('eventStart').value = info.startStr;
                    document.getElementById('eventEnd').value = info.endStr;
                    $('#eventModal').modal('show');
                },
                editable: true,
                eventClick: function(info) {
                    if (confirm('Are you sure you want to delete this event?')) {
                        info.event.remove();
                    }
                }
            });

            calendar.render();
        });
    </script>
</body>
</html>
